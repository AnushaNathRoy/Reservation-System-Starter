package flight.reservation.order;

import flight.reservation.Customer;
import flight.reservation.flight.ScheduledFlight;
import flight.reservation.payment.PaymentStrategy;

import java.util.Arrays;
import java.util.Date;
import java.util.List;

public class FlightOrder extends Order {
    private final List<ScheduledFlight> flights;
    private PaymentStrategy paymentStrategy;
    static List<String> noFlyList = Arrays.asList("Peter", "Johannes");

    public FlightOrder(List<ScheduledFlight> flights) {
        this.flights = flights;
    }

    public static List<String> getNoFlyList() {
        return noFlyList;
    }

    public List<ScheduledFlight> getScheduledFlights() {
        return flights;
    }

    public void setPaymentStrategy(PaymentStrategy paymentStrategy) {
        this.paymentStrategy = paymentStrategy;
    }

    public PaymentStrategy getPaymentStrategy() {
        return paymentStrategy;
    }

    
    public boolean process() {
        OrderHandler orderHandler = new OrderValidationHandler();
        OrderHandler paymentHandler = new PaymentHandler();
        OrderHandler orderFulfillmentHandler = new OrderCompletionHandler();

        orderHandler.setNextHandler(paymentHandler);
        paymentHandler.setNextHandler(orderFulfillmentHandler);

        return orderHandler.processOrder(this);
    }


}
